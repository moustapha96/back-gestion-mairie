; Configuration OPcache pour la production Symfony
; Ce fichier peut être surchargé via docker-compose.yml

; Activation d'OPcache
opcache.enable=1
opcache.enable_cli=0

; Mémoire allouée à OPcache (en MB)
opcache.memory_consumption=256

; Taille du buffer pour les chaînes internées (en MB)
opcache.interned_strings_buffer=16

; Nombre maximum de fichiers en cache
opcache.max_accelerated_files=20000

; Désactiver la validation des timestamps en production (performance)
; Mettre à 1 en développement pour voir les changements immédiatement
opcache.validate_timestamps=0

; Fréquence de revalidation (secondes) - ignoré si validate_timestamps=0
opcache.revalidate_freq=0

; Conserver les commentaires (nécessaire pour certaines fonctionnalités)
opcache.save_comments=1

; Shutdown rapide
opcache.fast_shutdown=1

; Permettre l'override de fichiers
opcache.enable_file_override=1

; Niveau d'optimisation (0x7FFFBFFF = toutes les optimisations)
opcache.optimization_level=0x7FFFBFFF

; Pourcentage maximum de mémoire gaspillée avant redémarrage
opcache.max_wasted_percentage=10

; Conserver les fichiers en mémoire après le shutdown
opcache.file_cache=/tmp/opcache

; Conserver les fichiers en mémoire après le shutdown (persistance)
opcache.file_cache_only=0

; Conserver les fichiers en mémoire après le shutdown (consistency checks)
opcache.file_cache_consistency_checks=1
